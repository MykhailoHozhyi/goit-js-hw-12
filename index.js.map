{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCard = cardInfo => {\n  return `\n    <li class=\"gallery-card\">\n  <a class=\"gallery-link\" href=\"${cardInfo.largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${cardInfo.webformatURL}\" alt=\"${cardInfo.tags}\" />\n  </a>\n\n  <div class=\"info-box\">\n    <ul class=\"info-list\">\n      <li class=\"info-item\">\n        <h3 class=\"info-item-title\">Likes</h3>\n        <p class=\"info-item-value\">${cardInfo.likes}</p>\n      </li>\n      <li class=\"info-item\">\n        <h3 class=\"info-item-title\">Views</h3>\n        <p class=\"info-item-value\">${cardInfo.views}</p>\n      </li>\n      <li class=\"info-item\">\n        <h3 class=\"info-item-title\">Comments</h3>\n        <p class=\"info-item-value\">${cardInfo.comments}</p>\n      </li>\n      <li class=\"info-item\">\n        <h3 class=\"info-item-title\">Downloads</h3>\n        <p class=\"info-item-value\">${cardInfo.downloads}</p>\n      </li>\n    </ul>\n  </div>\n</li>\n  `;\n};\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport function fetchPictures(userQuery, page) {\n  const axiosOptions = {\n    params: {\n      key: '45541049-685ffcd160f6cd622b440ebf7',\n      q: userQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 15,\n    },\n  };\n\n  return axios('', axiosOptions);\n}\n","import { createGalleryCard } from './js/render-functions';\nimport { fetchPictures } from './js/pixabay-api';\n\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nconst searchPicturesForm = document.querySelector('.search-picture-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-more-btn');\n\nlet currentPage = 1;\nlet userQuery = '';\n\nconst largePicture = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionsDelay: 250,\n});\n\nsearchPicturesForm.addEventListener('submit', onSearchPictureFormSubmit);\nloadMore.addEventListener('click', onLoadMoreClick);\n\nasync function onSearchPictureFormSubmit(event) {\n  try {\n    event.preventDefault();\n    loader.classList.remove('is-hidden');\n\n    userQuery = searchPicturesForm.elements.user_query.value.trim();\n    currentPage = 1;\n\n    const { data } = await fetchPictures(userQuery, currentPage);\n\n    loader.classList.add('is-hidden');\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n\n      gallery.innerHTML = '';\n      searchPicturesForm.reset();\n      loader.classList.add('is-hidden');\n      loadMore.classList.add('is-hidden');\n      return;\n    }\n\n    const galleryCards = data.hits\n      .map(imgInfo => createGalleryCard(imgInfo))\n      .join('');\n\n    gallery.innerHTML = galleryCards;\n    largePicture.refresh();\n    searchPicturesForm.reset();\n\n    loadMore.classList.remove('is-hidden');\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nasync function onLoadMoreClick(event) {\n  try {\n    currentPage++;\n\n    const { data } = await fetchPictures(userQuery, currentPage);\n\n    const galleryCards = data.hits\n      .map(imgInfo => createGalleryCard(imgInfo))\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', galleryCards);\n    largePicture.refresh();\n    smoothScroll();\n\n    const totalPage = data.totalHits / 15;\n    if (currentPage >= totalPage) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n\n      loadMore.classList.add('is-hidden');\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction smoothScroll() {\n  const galleryCard = document.querySelector('.gallery-card');\n  const galleryCardHeight = galleryCard.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: galleryCardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["createGalleryCard","cardInfo","axios","fetchPictures","userQuery","page","searchPicturesForm","gallery","loader","loadMore","currentPage","largePicture","SimpleLightbox","onSearchPictureFormSubmit","onLoadMoreClick","event","data","iziToast","galleryCards","imgInfo","err","smoothScroll","totalPage","galleryCardHeight"],"mappings":"owBAAO,MAAMA,EAAoBC,GACxB;AAAA;AAAA,kCAEyBA,EAAS,aAAa;AAAA,sCAClBA,EAAS,YAAY,UAAUA,EAAS,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAO7CA,EAAS,KAAK;AAAA;AAAA;AAAA;AAAA,qCAIdA,EAAS,KAAK;AAAA;AAAA;AAAA;AAAA,qCAIdA,EAAS,QAAQ;AAAA;AAAA;AAAA;AAAA,qCAIjBA,EAAS,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,ICrBvDC,EAAM,SAAS,QAAU,2BAElB,SAASC,EAAcC,EAAWC,EAAM,CAa7C,OAAOH,EAAM,GAZQ,CACnB,OAAQ,CACN,IAAK,qCACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACX,CACL,CAE+B,CAC/B,CCZA,MAAMC,EAAqB,SAAS,cAAc,sBAAsB,EAClEC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,SAAS,cAAc,gBAAgB,EAExD,IAAIC,EAAc,EACdN,EAAY,GAEhB,MAAMO,EAAe,IAAIC,EAAe,aAAc,CACpD,SAAU,GACV,aAAc,MACd,gBAAiB,SACjB,cAAe,GACjB,CAAC,EAEDN,EAAmB,iBAAiB,SAAUO,CAAyB,EACvEJ,EAAS,iBAAiB,QAASK,CAAe,EAElD,eAAeD,EAA0BE,EAAO,CAC9C,GAAI,CACFA,EAAM,eAAc,EACpBP,EAAO,UAAU,OAAO,WAAW,EAEnCJ,EAAYE,EAAmB,SAAS,WAAW,MAAM,KAAI,EAC7DI,EAAc,EAEd,KAAM,CAAE,KAAAM,CAAI,EAAK,MAAMb,EAAcC,EAAWM,CAAW,EAG3D,GADAF,EAAO,UAAU,IAAI,WAAW,EAC5BQ,EAAK,KAAK,SAAW,EAAG,CAC1BC,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,EAEDV,EAAQ,UAAY,GACpBD,EAAmB,MAAK,EACxBE,EAAO,UAAU,IAAI,WAAW,EAChCC,EAAS,UAAU,IAAI,WAAW,EAClC,MACD,CAED,MAAMS,EAAeF,EAAK,KACvB,IAAIG,GAAWnB,EAAkBmB,CAAO,CAAC,EACzC,KAAK,EAAE,EAEVZ,EAAQ,UAAYW,EACpBP,EAAa,QAAO,EACpBL,EAAmB,MAAK,EAExBG,EAAS,UAAU,OAAO,WAAW,CACtC,OAAQW,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,CAEA,eAAeN,EAAgBC,EAAO,CACpC,GAAI,CACFL,IAEA,KAAM,CAAE,KAAAM,CAAI,EAAK,MAAMb,EAAcC,EAAWM,CAAW,EAErDQ,EAAeF,EAAK,KACvB,IAAIG,GAAWnB,EAAkBmB,CAAO,CAAC,EACzC,KAAK,EAAE,EAEVZ,EAAQ,mBAAmB,YAAaW,CAAY,EACpDP,EAAa,QAAO,EACpBU,IAEA,MAAMC,EAAYN,EAAK,UAAY,GAC/BN,GAAeY,IACjBL,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,EAEDR,EAAS,UAAU,IAAI,WAAW,EAErC,OAAQW,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACH,CAEA,SAASC,GAAe,CAEtB,MAAME,EADc,SAAS,cAAc,eAAe,EACpB,sBAAqB,EAAG,OAE9D,OAAO,SAAS,CACd,IAAKA,EAAoB,EACzB,SAAU,QACd,CAAG,CACH"}